<p-toast position="top-right"></p-toast>
<div class="p-d-flex-column card">
    <h2 class="p-mb-5">Datos del perfil</h2>
  <div class=" p-d-flex" >
    <form class="p-fluid p-grid p-col-12 " [formGroup]="profileForm" (ngSubmit)="onSubmitDetailProfile()" > 
        <div class="p-field p-lg-3 p-md-3 p-sm-12 ">
            <span class="p-float-label"> 
                <input pInputText id="mainEmail" formControlName="mainEmail" maxlength="50"/>
              <label for="mainEmail">Correo principal</label>
            </span>
        </div>
        <div class="p-field p-lg-3 p-md-3 p-sm-12 ">
            <span class="p-float-label"> 
                <input pInputText id="repeatMainEmail" formControlName="repeatMainEmail" maxlength="50"/>
              <label for="mainEmail">Confirme su correo principal</label>
            </span>
        </div>
          <div class="p-field p-lg-3 p-md-3 p-sm-12">
              <span class="p-float-label">
                <input pInputText id="secondaryEmail" formControlName="secondaryEmail" />
                <label for="name">Correo secundario</label>
              </span>
            </div>
          <div class="p-field p-lg-3 p-md-3 p-sm-12">
              <span class="p-float-label">
                <input pInputText formControlName="imagen" lettersOnly />
                <label for="name">Imagen</label>
              </span>
            </div>
            <div class=" p-lg-3 p-md-3 p-sm-12 p-text-right">
                <button pButton pRipple label="Modificar datos" icon="pi pi-check" [disabled]="!profileForm.valid" class="p-button-outlined p-button-success" ></button>
            </div>
        </form>
    </div>
</div>

<app-addresses-details [(userId)]="userId" [(addressesVM)]="addressesVM" (displayAddressDialog)="newAddressHandler($event)" (editAddressEmitter)="editAddress($event)"></app-addresses-details>
<app-phones-details [(userId)]="userId" [(phonesVM)]="phonesVM" (displayPhoneDialog)="newPhoneHandler($event)" (editPhoneEmitter)="editPhoneHandler($event)"></app-phones-details>

<p-sidebar [(visible)]="addressDialog" [blockScroll]="true" [showCloseIcon]="true" [dismissible]="true" position="right" styleClass="p-sidebar-md" *ngIf="addressDialog">
    <div class="p-col-12">
        <h2 class="p-m-0">{{formTittle}}</h2>
            <hr/>
        <div class="p-fluid p-grid p-formgrid" [formGroup]="addressForm" >  
            <div class="p-field p-col-6 p-md-6 p-sm-12 p-mt-2">
                <span class="p-float-label">
                    <p-dropdown inputId="addressType" [autoDisplayFirst]="false" [options]="addressType.value" 
                    formControlName="idAddressType" optionLabel="name" ></p-dropdown>
                    <label for="dropdown">Tipo de Direccion</label>
                </span>
            </div>
            <div class="p-field p-col-6 p-md-6 p-sm-12 p-mt-2">
                <span class="p-float-label">
                    <p-dropdown inputId="places" [autoDisplayFirst]="false" [options]="places.value" 
                    formControlName="idPlaceType" optionLabel="name" optionValue="id"></p-dropdown>
                    <label for="dropdown">Tipo de Lugar</label>
                </span>
            </div>
        <div class="p-field p-md-6 p-sm-12 p-mt-2">
            <span class="p-float-label">
                <p-dropdown inputId="countries" [autoDisplayFirst]="false" [options]="countries.value" 
                formControlName="idCountry" optionLabel="name" (onChange)="getProvinces($event.value)"></p-dropdown>
                <label for="dropdown">Pais</label>
            </span>
        </div>
            <div class="p-field p-md-6 p-sm-12 p-mt-2">
                <span class="p-float-label">
                    <p-dropdown inputId="provinces" [autoDisplayFirst]="false" [(options)]="provinces.value" 
                    formControlName="idProvince" optionLabel="name" (onChange)="getDistrics($event.value)"></p-dropdown>
                    <label for="dropdown">Provincia/Estado</label>
                </span>
            </div>
            <div class="p-field p-md-6 p-sm-12 p-mt-2">
                <span class="p-float-label">
                    <p-dropdown inputId="districts" [autoDisplayFirst]="false" [options]="districts.value" (onChange)="getCities($event.value)" 
                    formControlName="idDistrict" optionLabel="name"></p-dropdown>
                    <label for="dropdown">Distrito</label>
                </span>
            </div>
            <div class="p-field p-md-6 p-sm-12 p-mt-2">
                <span class="p-float-label">
                    <p-dropdown inputId="cities" [autoDisplayFirst]="false" [options]="cities.value" 
                    formControlName="idCity" optionLabel="name" optionValue="id" ></p-dropdown>
                    <label for="dropdown">Ciudad</label>
                </span>
            </div>
                <div class="p-field  p-md-6 p-sm-12 p-mt-2">
                    <span class="p-float-label">
                        <input pInputText noneSpecialCharacters id="avenue" formControlName="avenue" maxlength="40"/>
                        <label for="name">Avenida</label>
                    </span>
                </div>
                <div class="p-field  p-md-6 p-sm-12 p-mt-2">
                    <span class="p-float-label">
                        <input pInputText noneSpecialCharacters id="street" formControlName="street" maxlength="40"/>
                        <label for="name">Calle</label>
                    </span>
                </div>
            <div class="p-field  p-md-4 p-sm-12 p-mt-2 p-mt-2">
                <span class="p-float-label">
                    <input pInputText noneSpecialCharacters id="building" formControlName="building" maxlength="40"/>
                    <label for="name">Edificio/Casa</label>
                </span>
            </div>
            <div class="p-field  p-md-4 p-sm-12 p-mt-2 p-mt-2">
                <span class="p-float-label">
                    <input pInputText numbersOnly id="floor" formControlName="floor" maxlength="3"/>
                    <label for="name">Piso</label>
                </span>
            </div>
            <div class="p-field p-md-4 p-sm-12 p-mt-2 p-mt-2">
                <span class="p-float-label">
                    <input pInputText noneSpecialCharacters id="apartment" formControlName="apartment" maxlength="3"/>
                    <label for="name">Departamento</label>
                </span>
            </div>
            
            <div class="p-field p-md-12 p-sm-12 p-mt-2 p-mt-2">
                <span class="p-float-label">
                    <input pInputText noneSpecialCharacters id="reference" lettersOnly formControlName="reference" maxlength="150"/>
                    <label for="name">Referencia</label>
                </span>
            </div>
        </div>
        <div class="p-formgroup-inline p-fluid p-col-12 p-md-12">
            <div class="buttons p-col-12 p-md-4">
                <button pButton pRipple type="button"label="Agregar" [disabled]="!addressForm.valid" icon="pi pi-check" class="p-button-outlined p-button-success" (click)="onSubmitProfile();"></button>
            </div>
            <div class="buttons p-col-12 p-md-4">
                <button pButton pRipple type="button" label="Cancelar" icon="pi pi-times" class="p-button-outlined p-button-danger" (click)="onCloseDialog()"></button>
            </div>  
        </div>
    </div>
</p-sidebar>

<p-sidebar [(visible)]="phoneDialog" [blockScroll]="true" [showCloseIcon]="true" [dismissible]="true" position="right" styleClass="p-sidebar-md" *ngIf="phoneDialog">
    <h2 class="p-m-0">{{formTittle}}</h2>
    <hr/>
    <div class="p-col-12">
        <div class="p-fluid p-grid p-formgrid" [formGroup]="phoneForm" >  
            <div class="p-field p-md-12 p-sm-12 p-mt-2 ">
                <span class="p-float-label">
                    <p-dropdown inputId="phoneType" [autoDisplayFirst]="false" [options]="phoneTypes.value" 
                    formControlName="idPhoneType" optionLabel="name" ></p-dropdown>
                    <label for="dropdown">Tipo de Teléfono</label>
                </span>
            </div>
            <div class="p-field p-md-12 p-sm-12 p-mt-2">
                <span class="p-float-label">
                    <p-dropdown inputId="prefix" [autoDisplayFirst]="false" [options]="phonePrefixes.value" 
                    formControlName="prefix" optionLabel="codePrefix"></p-dropdown>
                    <label for="dropdown">Prefijo</label>
                </span>
            </div>
            <div class="p-field p-md-12 p-sm-12 p-mt-2 p-mt-2">
                <span class="p-float-label">
                    <input pInputText numbersOnly id="phoneNumber" formControlName="phoneNumber" maxlength="11"/>
                    <label for="name">Número de teléfono</label>
                </span>
            </div>
        </div>
            <div class="p-formgroup-inline p-fluid p-col-12 p-md-12">
                <div class="buttons p-col-12 p-md-4">
                    <button pButton pRipple label="Agregar" [disabled]="!phoneForm.valid" icon="pi pi-check" class="p-button-outlined p-button-success" (click)="onSubmitProfile();"></button>
                </div>
                <div class="buttons p-col-12 p-md-4">
                    <button pButton pRipple label="Cancelar" icon="pi pi-times" class="p-button-outlined p-button-danger" (click)="onCloseDialog()"></button>
                </div>
            </div>
    </div>
</p-sidebar>
